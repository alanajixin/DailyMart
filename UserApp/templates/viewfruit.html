{% extends 'users.html' %}
{% block content %}
<section>
    <div class="container">
        <div class="row">
            {% for i in data %}
            <form method="post" action="{% url 'cartdata' id=i.id  %}" enctype="multipart/form-data">
                {% csrf_token %}
            
            <h2 style="font-size: 30px;">  {{i.productcategory}}</h2>
            
            <div class="col-md-6">
                <div class="card" style="width: 30rem; height:350px;">
                    <img class="card-img-top" src="{{i.productimage.url}}" alt="Card image cap" style="height:350px">
                </div>
            </div>
            <div class="col-md-6">
                <h2 style="font-size: 30px;">  {{i.productname}}</h2>
                <br><br>
                
                <h4 style="font-size: 20px;"> ${{i.productprice}} </h4>
                <br><br><br><br>
                <div class="input-group col-md-6 ">
                    <input type="number" id="quantity" name="quantity" class="form-control" value="1" min="1" max="100">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <input type="hidden" id="price" name="price" value="{{i.productprice}}">
                    <input type="text" id="total" name="total" value="{{i.productprice}}" >
                </div>
                
                <br><br>
                <div class="total">
                    
                    <br><br>
                    
                    
                    <button type="submit" class="btn btn-primary add-to-cart" style="font-size:20px">
                        <i class="fa fa-shopping-cart"></i> Add to cart
                      
                    </button>
                    
                        <button class="btn btn-danger " style="font-size:20px"type="submit" formaction="{% url 'products' %}">
                            <i class="fa fa-arrow-circle-left"></i> back
                          </button>
                       
                </div>
                
            </div>
            
        </form>
                
            </div>
        </div>
            
        </div>
            {% endfor %}
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

            <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
        
            <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
            <script>
                $(document).ready(function()
                {
                    $('#quantity').on('change', function(){
                        var quantity=$('#quantity').val();
                        var price=$('#price').val();
                        var total=parseInt(quantity)*parseInt(price);
                        $('#total').val(total);
                    })
                })
            </script>
        
        </div>
    </div>
</section>

{% endblock %}